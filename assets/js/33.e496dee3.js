(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{227:function(t,e,a){"use strict";a.r(e);var s=a(0),_=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"pod资源清单配置基础"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pod资源清单配置基础"}},[t._v("#")]),t._v(" Pod资源清单配置基础")]),t._v(" "),a("p",[a("code",[t._v("Docker")]),t._v("中我们都说容器、"),a("code",[t._v("docker")]),t._v("，大家耳熟能详。但到了"),a("code",[t._v("kubernetes")]),t._v('中，这个专有名词仿佛就被"取而代之"了。'),a("code",[t._v("kubernetes")]),t._v("的语境中，我们将一个容器集合称之为"),a("code",[t._v("Pod")])]),t._v(" "),a("ul",[a("li",[t._v("What is Pod?")]),t._v(" "),a("li",[t._v("Pod的特征")]),t._v(" "),a("li",[t._v("Pod对象的配置格式")]),t._v(" "),a("li",[t._v("Pod对象的申明类型")]),t._v(" "),a("li",[t._v("命令补充")]),t._v(" "),a("li",[t._v("三种网络代理方式")]),t._v(" "),a("li",[t._v("参考文档")])]),t._v(" "),a("h2",{attrs:{id:"_1-what-is-pod"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-what-is-pod"}},[t._v("#")]),t._v(" 1.What is Pod?")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://github-aaron89.oss-cn-beijing.aliyuncs.com/Kubernetes/pod.png",alt:"What is Pod"}}),t._v("\n那什么是Pod？如图所示，Pod中有一个pause容器，和一堆业务容器，他们有各自的"),a("code",[t._v("PID")]),t._v("、"),a("code",[t._v("MOUNT")]),t._v("和"),a("code",[t._v("USER")]),t._v("，但他们共享"),a("code",[t._v("IPC")]),t._v("、"),a("code",[t._v("UTS")]),t._v("和"),a("code",[t._v("NETWORK")]),t._v("。对于这六个专属名词的描述，可以看下面的表格：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("简称")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("UTS")]),t._v(" "),a("td",[t._v("主机名")])]),t._v(" "),a("tr",[a("td",[t._v("IPC")]),t._v(" "),a("td",[t._v("进程间通信")])]),t._v(" "),a("tr",[a("td",[t._v("PID")]),t._v(" "),a("td",[t._v('"chroot"进程树')])]),t._v(" "),a("tr",[a("td",[t._v("MOUNT")]),t._v(" "),a("td",[t._v("挂载点")])]),t._v(" "),a("tr",[a("td",[t._v("NETWORK")]),t._v(" "),a("td",[t._v("网络访问，包括接口")])]),t._v(" "),a("tr",[a("td",[t._v("USER")]),t._v(" "),a("td",[t._v("将本地的虚拟user-id映射到真实的user-id")])])])]),t._v(" "),a("h2",{attrs:{id:"_2-pod的特征"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-pod的特征"}},[t._v("#")]),t._v(" 2.Pod的特征")]),t._v(" "),a("ul",[a("li",[t._v('通过使用"各自"的IPC，使得可以在一个Pod中通信')]),t._v(" "),a("li",[t._v("容器可以通过localhost相互访问")]),t._v(" "),a("li",[t._v("每个容器继承Pod的名称")]),t._v(" "),a("li",[t._v("每个Pod有一个平滑共享网络名称空间的ip地址")]),t._v(" "),a("li",[t._v("Pod内部的存储卷是共享的")])]),t._v(" "),a("h2",{attrs:{id:"_3-pod对象的配置格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-pod对象的配置格式"}},[t._v("#")]),t._v(" 3.Pod对象的配置格式")]),t._v(" "),a("pre",[a("code",[t._v("kind：定义资源类型，例如deployment、service等\napiVersion：定义调用的api版本，所支持的版本可以通过kubectl  api-resources查看 \nmetadata：资源提供源数据信息，如名称、隶属的名称空间和标签等\nspec：用于定义用户期望的状态，不同的资源类型\nStatus：记录活动对象的当前状态信息，由k8s系统自行维护，对用户来说为只读字段\n")])]),t._v(" "),a("h2",{attrs:{id:"_4-pod对象的申明类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-pod对象的申明类型"}},[t._v("#")]),t._v(" 4.Pod对象的申明类型")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("陈述式：\n    kubectl create -f xx.yaml\n        \n申明式：\n    kubectl apply -f xx.yaml\n")])])]),a("h2",{attrs:{id:"_5-命令补充"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-命令补充"}},[t._v("#")]),t._v(" 5.命令补充")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#相关资源的命令查询：")]),t._v("\nkubectl explain pods"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".spec.tolerations…."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#导出pod对应的yaml模版：")]),t._v("\nkubectl  get pod ngx-new-cb79d555-gqwf8 -o yaml --export "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ngx-new-demo.yaml\n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Docker 策略    ")]),t._v("\nDocker:\n    imagePullPolicy:\n        Always:无论本地有没有镜像，都要去互联网拖"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("常用于拉取latest的镜像"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        IfNotPresent：如果本地没有镜像，就不启动（常用于拉取指定版本的镜像）\n        Nerver:本地有就直接用，没有再去拖\n\n")])])]),a("h2",{attrs:{id:"_6-三种网络代理方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-三种网络代理方式"}},[t._v("#")]),t._v(" 6.三种网络代理方式")]),t._v(" "),a("pre",[a("code",[t._v("Service：申明NodePort类型，可以通过任意节点访问\nhostPort：直接将容器的端口与所调度的节点上的端口路由，这样用户就可以通过宿主机的IP加上来访问Pod了\nhostNetwork：共享宿主机的网络名称空间\n")])]),t._v(" "),a("h2",{attrs:{id:"_7-参考文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-参考文档"}},[t._v("#")]),t._v(" 7.参考文档")]),t._v(" "),a("p",[t._v("reference文档：https://kubernetes.io/docs/reference/using-api/api-overview/")]),t._v(" "),a("p",[t._v("API文档：https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.16/")])])}),[],!1,null,null,null);e.default=_.exports}}]);