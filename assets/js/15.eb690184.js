(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{237:function(t,e,a){"use strict";a.r(e);var s=a(0),_=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-相关文档资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-相关文档资料"}},[t._v("#")]),t._v(" 1.相关文档资料")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("官网：")]),t._v(" "),a("p",[t._v("https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/")])]),t._v(" "),a("li",[a("p",[t._v("查询命令")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("kubectl explain sts\n")])])])]),t._v(" "),a("li",[a("p",[t._v("说明")]),t._v(" "),a("p",[a("code",[t._v("statefulset")]),t._v("直接用的比较少，而是根据需求，直接去用对应的"),a("code",[t._v("operator")]),t._v("控制器（没有打包在"),a("code",[t._v("controller-manager")]),t._v("中，需要应用时，自行安装集成）")]),t._v(" "),a("p",[t._v("GitHub：https://github.com/operator-framework/awesome-operators")])])]),t._v(" "),a("h2",{attrs:{id:"_2-金丝雀发布实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-金丝雀发布实现"}},[t._v("#")]),t._v(" 2.金丝雀发布实现")]),t._v(" "),a("ol",[a("li",[t._v("具体金丝雀发布流程如下图所示")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://github-aaron89.oss-cn-beijing.aliyuncs.com/Kubernetes/sts-canarydeploy.png",alt:"金丝雀发布"}})]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("说明：")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("statefulset")]),t._v("资源是按序生成、命名规律，且逆序更新")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("partition")]),t._v("参数：指定需要分区的数量。如图所示：")]),t._v(" "),a("p",[t._v("当"),a("code",[t._v("partition")]),t._v("=3时，表示将"),a("code",[t._v("Pod web-0")]),t._v("、"),a("code",[t._v("Pod web-1")]),t._v("、"),a("code",[t._v("Pod web-2")]),t._v("视为1个分区，新版本只会更新"),a("code",[t._v("Pod web-3")]),t._v("和"),a("code",[t._v("Pod web-4")])]),t._v(" "),a("p",[t._v("当"),a("code",[t._v("partition")]),t._v("=0时，发布策略将会把剩余的Pod也都发布成新版本")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("partition")]),t._v("资源申明帮助")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("kubectl explain sts.spec.updateStrategy.rollingUpdate.partition\n")])])])])])])}),[],!1,null,null,null);e.default=_.exports}}]);