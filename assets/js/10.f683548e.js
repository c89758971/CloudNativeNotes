(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{236:function(t,e,a){"use strict";a.r(e);var s=a(0),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-为什么需要service资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-为什么需要service资源"}},[t._v("#")]),t._v(" 1.为什么需要Service资源?")]),t._v(" "),a("p",[a("code",[t._v("Pod")]),t._v("对象的动态性会给客户端带来困扰")]),t._v(" "),a("h2",{attrs:{id:"_2-service资源如何管理pod"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-service资源如何管理pod"}},[t._v("#")]),t._v(" 2.Service资源如何管理Pod")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("service")]),t._v("通过标签选择器关联至拥有相关标签的"),a("code",[t._v("Pod")]),t._v("对象")]),t._v(" "),a("li",[t._v("客户端想"),a("code",[t._v("Service")]),t._v("进行请求，而非直接请求"),a("code",[t._v("Pod")]),t._v("对象")])]),t._v(" "),a("ol",[a("li",[t._v("查看命令")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("kubectl explain svc\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[a("code",[t._v("Service")]),t._v("默认类型为"),a("code",[t._v("ClusterIP")]),t._v("，还有"),a("code",[t._v("ExternalName")]),t._v(",  "),a("code",[t._v("NodePort")]),t._v("和"),a("code",[t._v("LoadBalancer")]),t._v("，共四种类型")])]),t._v(" "),a("h3",{attrs:{id:"_1-clusterip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-clusterip"}},[t._v("#")]),t._v(" 1.ClusterIP")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://github-aaron89.oss-cn-beijing.aliyuncs.com/Docker/clusterip.png",alt:"ClusterIP"}}),t._v("\n只能在集群内部被访问")]),t._v(" "),a("h3",{attrs:{id:"_2-nodeport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-nodeport"}},[t._v("#")]),t._v(" 2.NodePort")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://github-aaron89.oss-cn-beijing.aliyuncs.com/Docker/NodePort.png",alt:"NodePort"}})]),t._v(" "),a("p",[t._v("可以被集群外部访问到，节点的请求会DNAT到Serviceip，然后再调度至PodIP")]),t._v(" "),a("h3",{attrs:{id:"_3-loadbalancer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-loadbalancer"}},[t._v("#")]),t._v(" 3.LoadBalancer")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://github-aaron89.oss-cn-beijing.aliyuncs.com/Docker/externalclients.png",alt:"LoadBalancer"}})]),t._v(" "),a("p",[t._v("需要结合公有云的LBAAS（需要付费），支持动态接入")]),t._v(" "),a("h3",{attrs:{id:"_4-externalname"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-externalname"}},[t._v("#")]),t._v(" 4.ExternalName")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://github-aaron89.oss-cn-beijing.aliyuncs.com/Docker/externalname.png",alt:"ExternalName"}})]),t._v(" "),a("p",[t._v("将集群外部Serice引入集群内部供各客户端使用，需要设置标签选择器，而需要手动定义一个endpoint资源，指向外部的资源地址")]),t._v(" "),a("h2",{attrs:{id:"_3-endpoints"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-endpoints"}},[t._v("#")]),t._v(" 3.Endpoints")]),t._v(" "),a("ol",[a("li",[t._v("查看命令")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("kubectl explain endpoints\n    \nkubectl get endpoints -A\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("注意：自定义"),a("code",[t._v("endpoints")]),t._v("时，需要与"),a("code",[t._v("service")]),t._v("同名")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@centos-1 chapter5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  kubectl get svc")]),t._v("\nNAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   AGE\nkubernetes   ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.96")]),t._v(".0.1       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v("/TCP   4d23h\nngx-new      ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.96")]),t._v(".232.218   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("/TCP    2d5h\n    \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@centos-1 chapter5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kubectl get endpoints")]),t._v("\nNAME         ENDPOINTS                     AGE\nkubernetes   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".0.104:6443            4d23h\nngx-new      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.244")]),t._v(".2.8:80,10.244.2.9:80   2d5h\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);